<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:of="http://omnifaces.org/functions"
	template="/WEB-INF/template/template.xhtml">

<ui:define name="content">
<h:form id="profileForm">
	<p:panel styleClass="data panel no-border">
		<f:facet name="header">
			<div class="table">
				<div class="table-row">
					<div class="table-cell">
						<p:selectOneMenu id="selectedStockSymbol" value="#{profilePage.selectedSymbol}" filter="true">
							<p:ajax update="profileForm" listener="#{profilePage.onSymbolChange}" />
							<f:selectItems value="#{profilePage.symbols}" />
						</p:selectOneMenu>							
					</div>
					<div class="table-cell" style=" vertical-align: middle;">
						<h:outputText value="#{profilePage.stock.name}" />
					</div>
				</div>
			</div>
		</f:facet>
		<p:panelGrid styleClass="panelgrid no-border">
			<p:row>
				<p:column>
					<h:outputText value="Sector" />
				</p:column>
				<p:column>
					<p:inplace editor="true" styleClass="inplace" toggleable="#{profilePage.stock.sector.stockRelated}">
						<p:ajax event="save" update="@(.inplace)" listener="#{profilePage.onSectorChange}" />
						<f:facet name="output">
							<h:outputText value="#{profilePage.stock.sector.name}" />
						</f:facet>
						<f:facet name="input">
							<p:selectOneMenu value="#{profilePage.stock.sector}">
								<f:selectItems value="#{profilePage.sectors}" var="s" itemLabel="#{s.name}" />
							</p:selectOneMenu>
						</f:facet>
					</p:inplace>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<h:outputText value="Sub Sector" />
				</p:column>
				<p:column>
					<p:inplace editor="true" styleClass="inplace" toggleable="#{profilePage.stock.subSector.sector ne null}">
						<p:ajax event="save" update="@(.inplace)" listener="#{profilePage.updateStock}" />
						<f:facet name="output">
							<h:outputText value="n/a" rendered="#{profilePage.stock.subSector.sector eq null}" />
							<h:outputText value="#{profilePage.stock.subSector.name}" rendered="#{profilePage.stock.subSector.sector ne null}" />
						</f:facet>
						<f:facet name="input">
							<p:selectOneMenu value="#{profilePage.stock.subSector}">
								<f:selectItems value="#{profilePage.subSectors}" var="ss" itemLabel="#{ss.name}" />
							</p:selectOneMenu>
						</f:facet>
					</p:inplace>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<h:outputText value="PSEi" />
				</p:column>
				<p:column>
					<p:inplace editor="true" styleClass="inplace">
						<p:ajax event="save" update="@(.inplace)" listener="#{profilePage.onIndexChange}" />
						<f:facet name="output">
							<h:outputText value="#{profilePage.stock.psei}" />
						</f:facet>
						<f:facet name="input">
							<p:selectBooleanCheckbox value="#{profilePage.stock.psei}" />
						</f:facet>
					</p:inplace>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<h:outputText value="All Shares" />
				</p:column>
				<p:column>
					<p:inplace editor="true" styleClass="inplace" toggleable="#{not profilePage.stock.psei and empty profilePage.stock.sectoralIndex}">
						<p:ajax event="save" update="@(.inplace)" listener="#{profilePage.updateStock}" />
						<f:facet name="output">
							<h:outputText value="#{profilePage.stock.allShares}" />
						</f:facet>
						<f:facet name="input">
							<p:selectBooleanCheckbox value="#{profilePage.stock.allShares}" />
						</f:facet>
					</p:inplace>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<h:outputText value="Sectoral Index" />
				</p:column>
				<p:column>
					<p:inplace editor="true" styleClass="inplace">
						<p:ajax event="save" update="@(.inplace)" listener="#{profilePage.onIndexChange}" />
						<f:facet name="output">
							<h:outputText value="none" rendered="#{empty profilePage.stock.sectoralIndex}" />
							<h:outputText value="#{profilePage.stock.sectoralIndex.name}" rendered="#{not empty profilePage.stock.sectoralIndex}" />
						</f:facet>
						<f:facet name="input">
							<p:selectOneMenu value="#{profilePage.stock.sectoralIndex}">
								<f:selectItem itemValue="" />
								<f:selectItems value="#{profilePage.sectoralIndices}" var="si" itemLabel="#{si.name}" />
							</p:selectOneMenu>
						</f:facet>
					</p:inplace>
				</p:column>
			</p:row>
		</p:panelGrid>
	</p:panel>
</h:form>
</ui:define>

</ui:composition>